<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Time Tracker Options</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{ margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; background:#0f1220; color:#e7e9ff; }
    .wrap{ max-width:720px; margin:20px auto; padding:16px; }
    h2{ color:#6c8cff; margin:0 0 12px; }
    .grid{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    textarea, input{ width:100%; background:#0f132b; color:#e7e9ff; border:1px solid rgba(255,255,255,.1); border-radius:10px; padding:10px; min-height:160px; }
    label{ display:block; margin:10px 0 6px; color:#9aa1c2 }
    .row{ display:flex; gap:10px; align-items:center; }
    button{ background:#6c8cff; color:white; border:0; border-radius:10px; padding:10px 14px; cursor:pointer; }
    .hint{ color:#9aa1c2; font-size:.9rem; margin-top:6px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>⚙️ Options</h2>
    <div class="grid">
      <div>
        <label>Productive Domains (one per line)</label>
        <textarea id="productive"></textarea>
      </div>
      <div>
        <label>Unproductive Domains (one per line)</label>
        <textarea id="unproductive"></textarea>
      </div>
    </div>

    <label style="margin-top:16px">Backend URL (optional, e.g., https://your-repl-url)</label>
    <input id="backendURL" placeholder="https://your-backend.example.com" />

    <div class="row" style="margin-top:14px">
      <button id="save">Save</button>
      <div id="status" class="hint"></div>
    </div>
  </div>

  <script>
    function parseLines(v){ return v.split(/\r?\n/).map(s=>s.trim()).filter(Boolean); }

    function load(){
      chrome.storage.sync.get(["productive","unproductive","backendURL"], (cfg)=>{
        document.getElementById("productive").value = (cfg.productive || []).join("\n");
        document.getElementById("unproductive").value = (cfg.unproductive || []).join("\n");
        document.getElementById("backendURL").value = cfg.backendURL || "";
      });
    }

    async function save(){
      const productive = parseLines(document.getElementById("productive").value);
      const unproductive = parseLines(document.getElementById("unproductive").value);
      const backendURL = document.getElementById("backendURL").value.trim();
      await chrome.storage.sync.set({productive, unproductive, backendURL});
      document.getElementById("status").textContent = "Saved!";
      chrome.runtime.sendMessage({ type:"refreshSets" }, ()=>{});
      setTimeout(()=>document.getElementById("status").textContent="", 1200);
    }

    document.getElementById("save").addEventListener("click", save);
    load();
  </script>
</body>
</html>
